<!DOCTYPE html>
<html lang="en">
    <head>
        <Title>Editar producto</Title>
        <link rel="stylesheet" href="/css/crearProducto.css">
    </head>
    <%- include('../partials/head') %>
    
 <body>
    <%- include('../partials/header') %>
    <main>
        <h2 class="creacion">Edición de Producto</h2>
        <div class="formulario">
            <form action="/editar/<%=productToEdit.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                <div class="titulo">
                    <label for="titulo">Título:
                        <input 
                            type="text" 
                            name="titulo" 
                            id="titulo"
                            class="control"
                            value="<%= productToEdit.titulo %>"
                        >
                    </label>
                    <% if (locals.errors && errors.titulo) {%>
                        <div class="text-danger">
                            <%= errors.titulo.msg %>
                        </div>
                    <%} %><br><br>

                    <label for="autor">Autor:
                        <input 
                            type="text" 
                            name="autor" 
                            id="autor"
                            class="control"
                            value= "<%= productToEdit.autor %>"
                        >
                    </label>
                    <% if (locals.errors && errors.autor) {%>
                        <div class="text-danger">
                            <%= errors.autor.msg %>
                        </div>
                    <%} %><br><br>

                    <label for="editorial">Editorial:
                        <input 
                            type="text" 
                            name="editorial"
                            class="control"
                            value= "<%= productToEdit.editorial %>"
                        >
                    </label>
                    <% if (locals.errors && errors.editorial) {%>
                        <div class="text-danger">
                            <%= errors.editorial.msg %>
                        </div>
                    <%} %><br><br>

                    <label for="rating">Rating:
                        <input 
                            type="number" 
                            name="rating" 
                            id="rating"
                            class="control"
                            min="0" max="5"
                            value ="<%= productToEdit.rating %>"
                        >
                    </label>
                    <% if (locals.errors && errors.rating) {%>
                        <div class="text-danger">
                            <%= errors.rating.msg %>
                        </div>
                    <%} %><br><br>

                    <label for="categoria">Categoría:
                        <select name="categoria" id="categoria" class="control">
                        <%
                            let category =[ 'Arte', 'Ciencia', 'Deportes', 'Derecho', 'Economía',
                                            'Enseñanza Inglés', 'Ficción', 'Ingeniería', 'Infantil',
                                             'Informática', 'Literatura', 'Medicina', 'Psicología',
                                             'Religión'];
                        %>
                        <% for(const cat of category) { %>
                            <option  value="<%=cat %>" "<%= productToEdit.categoria %>"><%=cat%></option>
                        <% } %>                            
                        </select>
                    </label><br><br> 
            
                    <label for="precio">Precio:
                        <input 
                            type="number" 
                            name="precio"
                            class="control" 
                            min="0"
                            value= "<%= productToEdit.precio %>"
                        >    
                    </label>
                    <% if (locals.errors && errors.precio) {%>
                        <div class="text-danger">
                            <%= errors.precio.msg %>
                        </div>
                    <%} %><br><br>
    
                    <label for="idioma">Idioma:
                        <input 
                            type="text" 
                            name="idioma" 
                            id="idioma"
                            class="control"
                            value = "<%= productToEdit.idioma %>"
                        > 
                    </label> 
                    <% if (locals.errors && errors.idioma) {%>
                        <div class="text-danger">
                            <%= errors.idioma.msg %>
                        </div>
                    <%} %><br><br>

                    <label for="anio">Año:
                        <input 
                            type="number" 
                            name="anio" 
                            id="anio"
                            class="control"
                            min="100"
                            value = "<%= productToEdit.anio %>"
                        >
                    </label>
                    <% if (locals.errors && errors.year) {%>
                        <div class="text-danger">
                            <%= errors.year.msg %>
                        </div>
                    <%} %><br><br>
                   
                    <label for="paginas">Páginas:
                        <input type="text" name="paginas" id="paginas" class="control"
                         value= "<%= productToEdit.paginas %>">
                    </label>
                    <% if (locals.errors && errors.paginas) {%>
                        <div class="text-danger">
                            <%= errors.paginas.msg %>
                        </div>
                    <%} %><br><br>
                </div><br>
                
                <label for="descuento"> Descuento:<br>
                    <input type="radio" name="descuento" id="descuento0" value="0"  <%= productToEdit.descuento == 0 ? "checked":"" %>> 0% </input>&emsp;
                    <input type="radio" name="descuento" id="descuento5" value="5" <%= productToEdit.descuento == 5 ? "checked":"" %>> 5% </input>&emsp;
                    <input type="radio" name="descuento" id="descuento10" value="10" <%= productToEdit.descuento == 10 ? "checked":"" %>> 10% </input>&emsp;
                    <input type="radio" name="descuento" id="descuento20" value="20" <%= productToEdit.descuento == 20 ? "checked":"" %>> 20% </input>&emsp;
                    <input type="radio" name="descuento" id="descuento50" value="50" <%= productToEdit.descuento == 50 ? "checked":"" %>> 50% </input>
                </label><br>
                
                <label for="resenia"><br> Reseña: <br>
                    <textarea name="resenia" class="control" value="<%= productToEdit.resenia %>"><%= productToEdit.resenia %></textarea>
                </label><br>    
                            
                
                <div class="titulo">
                     <label for="imagenLibro">Imagen:
                        <input 
                            type="file"    
                            size="24" 
                            name="imagenLibro"
                            class="control"
                            value ="<%= productToEdit.imagenLibro %>"
                        >
                        <% if (locals.errors && errors.imagenLibro) {%>
                            <div class="text-danger">
                                <%= errors.imagenLibro.msg %>
                            </div>
                        <%} %>
                    </label>
                </div>  
                    
                <div class="agregar">
                    <button type="submit" class="boton-form">Actualizar</button><br>
                </div><br>
                <button type="submit" class="boton-form">Borrar</button>
            </form>
        </div>
    </main>
    <%- include('../partials/footer') %>
    
 </body>
</html>
