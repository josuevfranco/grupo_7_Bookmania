<!DOCTYPE html>
<html lang="en">
    <head><Title>Editar producto</Title></head>
    <%- include('../partials/head') %>
    
 <body>
    <%- include('../partials/header') %>
    <main>
        <h2 class="register">Edición de Producto</h2>
        <div class="formulario">
            <form action="/edit/<%=productToEdit.id%>?_method=PUT" method="POST">
                <div class="titulo">
                    <label for="titulo">Título:
                        <input 
                            type="text" 
                            name="titulo" 
                            id="titulo"
                            class="control"
                            value="<%= productToEdit.titulo %>"
                        >
                    </label>
                    <% if (locals.errors && errors.titulo) {%>
                        <div class="text-danger">
                            <%= errors.titulo.msg %>
                        </div>
                    <%} %><br>

                    <label for="autor">Autor:
                        <input 
                            type="text" 
                            name="autor" 
                            id="autor"
                            class="control"
                            value= "<%= productToEdit.autor %>"
                        >
                    </label>
                    <% if (locals.errors && errors.autor) {%>
                        <div class="text-danger">
                            <%= errors.autor.msg %>
                        </div>
                    <%} %><br>

                    <label for="editorial">Editorial:
                        <input 
                            type="text" 
                            name="editorial"
                            class="control"
                            value= "<%= productToEdit.editorial %>"
                        >
                    </label>
                    <% if (locals.errors && errors.editorial) {%>
                        <div class="text-danger">
                            <%= errors.editorial.msg %>
                        </div>
                    <%} %><br>

                    <label for="rating">Rating:
                        <input 
                            type="number" 
                            name="rating" 
                            id="rating"
                            class="control"
                            value ="<%= productToEdit.rating %>"
                        >
                    </label>
                    <% if (locals.errors && errors.rating) {%>
                        <div class="text-danger">
                            <%= errors.rating.msg %>
                        </div>
                    <%} %><br>

                    <label for="categoría">Categoría:
                        <select name="Categoría" class="control">
                        <%
                            let category =[ 'Arte', 'Ciencia', 'Deportes', 'Derecho', 'Economía',
                                            'Enseñanza Inglés', 'Ficción', 'Ingeniería', 'Infantil',
                                             'Informática', 'Literatura', 'Medicina', 'Psicología',
                                             'Religión'];
                        %>
                        <% for(const cat of category) { %>
                            <option 
                                value="<%=cat %>"
                                        "<%= productToEdit.categoria %>"
                            ><%=cat%></option>
                        <% } %>                            
                        </select>
                    </label><br>  
            
                    <label for="precio">Precio:
                        <input 
                            type="number" 
                            name="precio"
                            class="control" 
                            placeholder="Ejem 123.99"
                            value= "<%= productToEdit.precio %>"
                        >    
                    </label>
                    <% if (locals.errors && errors.precio) {%>
                        <div class="text-danger">
                            <%= errors.precio.msg %>
                        </div>
                    <%} %><br>
    
                    <label for="idioma">Idioma:
                        <input 
                            type="text" 
                            name="idioma" 
                            id="idioma"
                            class="control"
                            value = "<%= productToEdit.idioma %>"
                        > 
                    </label> 
                    <% if (locals.errors && errors.idioma) {%>
                        <div class="text-danger">
                            <%= errors.idioma.msg %>
                        </div>
                    <%} %><br>

                    <label for="anio">Año:
                        <input 
                            type="number" 
                            name="anio" 
                            id="anio"
                            class="control"
                            value = "<%= productToEdit.anio %>"
                        >
                    </label>
                    <% if (locals.errors && errors.year) {%>
                        <div class="text-danger">
                            <%= errors.year.msg %>
                        </div>
                    <%} %><br>
                   
                    <label for="paginas">Páginas:
                        <input type="text" name="paginas" id="paginas" class="control"
                         value= "<%= productToEdit.paginas %>">
                    </label>
                    <% if (locals.errors && errors.paginas) {%>
                        <div class="text-danger">
                            <%= errors.paginas.msg %>
                        </div>
                    <%} %><br>
                </div><br>
                
                <label for="descuento"> Descuento:<br>
                    <%= productToEdit.descuento %><input type="radio" name="descuento" id="0%" value ="<%= productToEdit.descuento %>">
                </label><br>
                
                <label for="resenia"> Detalle del libro: <br>
                    <textarea name="resenia" class="control">"<%= productToEdit.resenia %>" </textarea>
                </label><br>                
                
                <div class="titulo">
                     <label for="imagenLibro">Imagen:
                        <input 
                            type="file"    
                            size="24" 
                            name="imagenLibro"
                            class="control"
                            value ="<%= productToEdit.imagenLibro %>"
                        >
                        <% if (locals.errors && errors.imagenLibro) {%>
                            <div class="text-danger">
                                <%= errors.imagenLibro.msg %>
                            </div>
                        <%} %>
                    </label>
                </div>  
                    
                <div class="enviar">
                    <button type="submit" class="boton-form">Cargar Producto</button><br>
                </div><br>
                <button type="submit" class="boton-form">Borrar</button>
            </form>
        </div>
    </main>
    <%- include('../partials/footer') %>
    
 </body>
</html>
