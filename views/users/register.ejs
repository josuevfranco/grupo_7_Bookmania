<!DOCTYPE html>
<html lang="en">
    <head><Title>Registro</Title></head>
    <%- include('../partials/head') %>
    
<body>
    <%- include('../partials/header') %>
   
    <main>
        <div class="columnas_reg">
            <div class="column1_reg">
                <img src="./images/registroLogin/imagen-Libro.jpg">
                
            </div>

            <div class="column2_reg">
                <div class="register"><h1>Regístrate</h1> </div>
                <h3 class="texto1">Al crear una cuenta en Bookmania, podrás agilizar el proceso de compra,
                    guardar múltiples direcciones de envío, rastrear pedidos y más.</h3>

                <form action="/register" method="POST" enctype="multipart/form-data">
                    <div class="form">
                        <label for="name">*Nombre (s):
                            <input 
                                type="text" 
                                id="name" 
                                name="nameUser" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.nameUser : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.nameUser) {%>
                            <div class="text-danger">
                                <%= errors.nameUser.msg %>
                            </div>
                        <%} %>
                        <br><br>

                        <label for="fname">*Apellido paterno:
                            <input 
                                type="text" 
                                id="fname" 
                                name="lastName" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.lastName : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.lastName) {%>
                            <div class="text-danger">
                                <%= errors.lastName.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="fMname">*Apellido materno:
                            <input 
                                type="text" 
                                id="fMname" 
                                name="lastNameM" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.lastNameM : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.lastNameM) {%>
                            <div class="text-danger">
                                <%= errors.lastNameM.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="email">*Correo electrónico:
                            <input 
                                type="text" 
                                id="email" 
                                name="email" 
                                class="control "
                                value= "<%= locals.oldData ? oldData.email : null %>"
                            >
                        </label><% if (locals.errors && errors.email) {%>
                            <div class="text-danger">
                                <%= errors.email.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="rol">*Rol:
                            <select name="rol" class="control">
                            <%
                                let tiposUser =['cliente', 'administrador'];
                            %>
                            <% for(const tipo of tiposUser) { %>
                                <option 
                                    value="<%=tipo %>"
                                        <%= locals.oldData && (tipo === oldData.rol) ? 'selected' : null %>
                                ><%=tipo%></option>
                            <% } %>                            
                            </select>
                        </label><br><br>

                        <label for="password">*Contraseña:
                            <input type="password" id="password" name="password" class="control">
                        </label>
                        <% if (locals.errors && errors.password) {%>
                            <div class="text-danger">
                                <%= errors.password.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="password2">*Confirmar contraseña:
                            <input type="password" id="password2" name="password2" class="control">
                        </label><br><br><br>
                        <label for="img">Imagen de usuario:
                            <input type="file" size="24" name="usuarios">
                        </label>
                        <% if (locals.errors && errors.usuarios) {%>
                            <div class="text-danger">
                                <%= errors.usuarios.msg %>
                            </div>
                        <%} %>
                    </div>
                    <div class="boton-capt">
                        <div class="captcha">
                            <div class="spinner">
                                <label>
                                    <input type="checkbox" onclick="$(this).attr('disabled','disabled');" required>
                                    <span class="checkmark"><span>&nbsp;</span></span>
                                </label>
                            </div>
                            <div class="text-capt">
                                No soy un robot
                            </div>
                            <div class="logo-capt">
                                <img src="https://forum.nox.tv/core/index.php?media/9-recaptcha-png/" class="img-cap"/>
                                <p>reCAPTCHA</p>
                                <small>Privacy - Terms</small>
                            </div>
                        </div>
                    </div>

                    <div class="terminos-check">
                        <label for="term1" class="term">
                            <input type="checkbox" name="term1">
                            Sí, quiero recibir por correo electrónico, promociones exclusivas de Librerías Bookmanía.
                        </label>
                        <label for="term2" class="term">
                            <input type="checkbox" name="term2" required>
                            He leído y acepto los Términos y Condiciones y Aviso de Privacidad.
                        </label>
                    </div>

                    <div class="enviar">
                        <button type="submit">Enviar</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <%- include('../partials/footer') %>
    
</body>
</html>
